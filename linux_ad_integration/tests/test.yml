---
- hosts: "tag_Name_ehe_management_{{ hostname }}"
  become: True
  become_user: root
  gather_facts: yes
  vars:
    ansible_user: ubuntu
  vars_prompt:
    - name: admin_password
      prompt: "Please enter the password for {{ admin_user }}@{{ ldap_domain|upper }}"
      private: yes
  pre_tasks:
    - name: Install min python if needed
      raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)
      changed_when: false
    - name: "Display all variables/facts known for {{ hostname }}"
      debug:
        var: hostvars[inventory_hostname]
        verbosity: 0
  roles:
    - { role: "{{ playbook_dir }}/.." }
